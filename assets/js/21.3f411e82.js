(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{175:function(e,t,n){"use strict";n.r(t);var a=n(0),s=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("h2",{attrs:{id:"mysql5-7服务无法启动问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql5-7服务无法启动问题","aria-hidden":"true"}},[e._v("#")]),e._v(" mysql5.7服务无法启动问题")]),e._v(" "),n("p",[e._v("以mysql 5.7.17 版本为例")]),e._v(" "),n("p",[n("strong",[e._v("方式1")])]),e._v(" "),n("ol",[n("li",[n("p",[e._v("进入mysql server安装的路径: cd C:\\Program Files\\MySQL\\MySQL Server 5.7")])]),e._v(" "),n("li",[n("p",[e._v("如果目录下有data文件的先删除掉data文件")])]),e._v(" "),n("li",[n("p",[e._v("清除掉原来的服务:"),n("strong",[e._v("mysqld remove")])])]),e._v(" "),n("li",[n("p",[e._v("重新安装服务: "),n("strong",[e._v("mysqld -install")])])]),e._v(" "),n("li",[n("p",[e._v("产生无密码的帐号: "),n("strong",[e._v("mysqld --initialize-insecure")])])]),e._v(" "),n("li",[n("p",[e._v("启动服务:"),n("strong",[e._v("net start mysql")])])]),e._v(" "),n("li",[n("p",[e._v("登录数据库："),n("strong",[e._v("mysql -u root -p")]),e._v(" 直接回车不输入密码")])]),e._v(" "),n("li",[n("p",[e._v("此时若是需要修改密码的话，可继续操作")])]),e._v(" "),n("li",[n("p",[e._v("修改root密码：")]),e._v(" "),n("p",[n("strong",[e._v("update user set authentication_string=password('123456') where user=\"root\";")])]),e._v(" "),n("p",[n("strong",[e._v("flush privileges;")])])]),e._v(" "),n("li",[n("p",[e._v("退出数据库"),n("strong",[e._v("exit")]),e._v("后重新使用新的密码登录即可")])])]),e._v(" "),n("p",[n("strong",[e._v("方式2")])]),e._v(" "),n("p",[e._v("启动services.msc里的mysql服务重新启动失败，提示“本地计算机上的MySQL服务启动后停止。某些服务在未由其他服务或程序使用时将自动”，可参考如下方式：")]),e._v(" "),n("p",[e._v("1.首先需要把原来的服务删除，执行如下操作:")]),e._v(" "),n("ul",[n("li",[e._v("cd C:\\Program Files\\MySQL\\MySQL Server 5.7")]),e._v(" "),n("li",[n("strong",[e._v("mysqld --remove mysql")])]),e._v(" "),n("li",[e._v("进入bin目录")]),e._v(" "),n("li",[n("strong",[e._v("mysqld--initialize-insecure --user=mysql")])]),e._v(" "),n("li",[e._v("注册服务"),n("strong",[e._v("mysqld --install mysql --defaults-file=C:\\Program Files\\MySQL\\MySQL Server 5.7\\my.ini")])]),e._v(" "),n("li",[e._v("启动服务:"),n("strong",[e._v("net start mysql")])])]),e._v(" "),n("h2",{attrs:{id:"access-denied-for-user-‘root’-‘localhost’-using-password-yes-问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#access-denied-for-user-‘root’-‘localhost’-using-password-yes-问题","aria-hidden":"true"}},[e._v("#")]),e._v(" Access denied for user ‘root’@‘localhost’ (using password: YES)问题")]),e._v(" "),n("p",[e._v("输入正确用户名和密码登录失败，弹出access denied，可用跳过验证重新设置密码")]),e._v(" "),n("ol",[n("li",[n("p",[n("strong",[e._v("使用管理员权限打开cmd")]),e._v(",先看services.msc里的mysql服务是否已经关闭")])]),e._v(" "),n("li",[n("p",[e._v("进入安装路径执行如下操作")]),e._v(" "),n("p",[e._v("cd C:\\Program Files\\MySQL\\MySQL Server 5.7\\bin")]),e._v(" "),n("p",[e._v("mysqld --initialize")]),e._v(" "),n("p",[e._v("mysqld --install mysql --defaults-file=C:\\Program Files\\MySQL\\MySQL Server 5.7\\my.ini")]),e._v(" "),n("p",[e._v("net stop mysql")]),e._v(" "),n("p",[e._v("mysqld --skip-grant-tables")])]),e._v(" "),n("li",[n("p",[e._v("同样使用管理员权限另外开一个cmd窗口，执行如下操作")]),e._v(" "),n("p",[e._v("mysql -u root")]),e._v(" "),n("p",[e._v("update user set authentication_string=password('123456') where user=\"root\";")]),e._v(" "),n("p",[e._v("flush privileges;")]),e._v(" "),n("p",[e._v("关闭该窗口")])]),e._v(" "),n("li",[n("p",[e._v("​\t再重新启动mysql服务")]),e._v(" "),n("p",[e._v("net start mysql")]),e._v(" "),n("p",[e._v("mysql -u root -p 输入之前修改的密码可正常登录")]),e._v(" "),n("p",[e._v('若是正常登录后提示“ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.”则执行alter user user() identified by "123456";')])])]),e._v(" "),n("h2",{attrs:{id:"创建用户并赋予权限"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建用户并赋予权限","aria-hidden":"true"}},[e._v("#")]),e._v(" 创建用户并赋予权限")]),e._v(" "),n("p",[e._v("首先查看各个用户的权限情况")]),e._v(" "),n("p",[e._v("​\t"),n("strong",[e._v("select user,host,grant_priv from mysql.user;")])]),e._v(" "),n("p",[e._v("若是当前用户登录下的grant_priv为N，则需要修改权限")]),e._v(" "),n("p",[e._v("​\t"),n("strong",[e._v("update user set grant_priv='Y' where user='username';")])]),e._v(" "),n("p",[n("strong",[e._v("FLUSH PRIVILEGES;")])]),e._v(" "),n("p",[e._v("再创建一个新的用户并赋予权限")]),e._v(" "),n("p",[e._v("​\t"),n("strong",[e._v("create user 'username'@'%' identified by 'username';")]),e._v("(通配符%表示让该用户从任意远程主机登录，如果是本地用户可以用localhost替换%)")]),e._v(" "),n("p",[e._v("​\t"),n("em",[n("em",[e._v("grant select,insert,update,delete,create on databasename.")]),e._v(" to username;")]),e._v("*")]),e._v(" "),n("p",[e._v("​\t"),n("strong",[e._v("FLUSH PRIVILEGES;")])]),e._v(" "),n("h2",{attrs:{id:"撤销用户权限"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#撤销用户权限","aria-hidden":"true"}},[e._v("#")]),e._v(" 撤销用户权限")]),e._v(" "),n("p",[n("em",[n("em",[e._v("revoke select,insert,update,delete,create on databasename.")]),e._v(" from 'username'@'%';")]),e._v("*")]),e._v(" "),n("h2",{attrs:{id:"备份数据库问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#备份数据库问题","aria-hidden":"true"}},[e._v("#")]),e._v(" 备份数据库问题")]),e._v(" "),n("p",[e._v("备份数据库："),n("strong",[e._v("mysqldump -u root -p --all-databases > dumpdata.sql")])]),e._v(" "),n("p",[e._v("恢复数据库 "),n("strong",[e._v("source dumpdata.sql")]),e._v(" 或者直接把sql脚本放在workbench里执行")]),e._v(" "),n("h2",{attrs:{id:"创建触发器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建触发器","aria-hidden":"true"}},[e._v("#")]),e._v(" 创建触发器")]),e._v(" "),n("p",[e._v("​\tCREATE TRIGGER trigger_name trigger_time trigger_event ON tb_name FOR EACH ROW trigger_stmt\n​\t\ttrigger_name：触发器的名称\n​\t\ttirgger_time：触发时机，为BEFORE或者AFTER\n​\t\ttrigger_event：触发事件，为INSERT、DELETE或者UPDATE\n​\t\ttb_name：表示建立触发器的表明，就是在哪张表上建立触发器\n​\t\ttrigger_stmt：触发器的程序体，可以是一条SQL语句或者是用BEGIN和END包含的多条语句\n​\t所以可以说MySQL创建以下六种触发器：BEFORE INSERT,BEFORE DELETE,BEFORE UPDATE,AFTER INSERT,AFTER DELETE,AFTER UPDATE")]),e._v(" "),n("h2",{attrs:{id:"mysql经常弹出提示框：unable-to-connect-to-remote-host-catalog-download-has-failed"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql经常弹出提示框：unable-to-connect-to-remote-host-catalog-download-has-failed","aria-hidden":"true"}},[e._v("#")]),e._v(" MySQL经常弹出提示框：Unable to connect to remote host. Catalog download has failed")]),e._v(" "),n("p",[e._v("具体如下图：")]),e._v(" "),n("p",[n("img",{attrs:{src:"/img/shot5.PNG",alt:"shot1"}})]),e._v(" "),n("p",[e._v("该问题是由于新版本的 Mysql 在安装的时候会自动在 Windows 的“任务计划程序”中安装一个定时任务")]),e._v(" "),n("p",[e._v("打开“控制面板”，查看方式选择“小图标”，找到“管理工具”项，点击“任务计划程序”，找到列表中的MySQL->Installer选择名称为“ManifestUpdate”任务，右键菜单点击“禁用”项，完成任务禁用。也可以点击右侧的“禁用”")]),e._v(" "),n("h2",{attrs:{id:"实践sql语句"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实践sql语句","aria-hidden":"true"}},[e._v("#")]),e._v(" 实践SQL语句")]),e._v(" "),n("div",{staticClass:"language-mysql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("## 创建、删除、查询数据库\ncreate database sonar character set utf8 collate utf8_general_ci;\ndrop database sonarqubedb;\nshow databases;\n\n## 创建用户并赋予权限\nCREATE USER 'sonaruser'@'%' IDENTIFIED BY '123456';\ncreate user 'sonaruser'@'localhost' identified by '123456';\ngrant all on *.* to 'sonaruser'@'%';\nflush privileges;\ngrant all on *.* to 'sonaruser'@'localhost';\n\n## 指定数据库下创建表\nuse sonarqubedb;\ncreate table employee(\n\tename varchar(10),\n    hiredate date,\n    sal decimal(10,2),\n    deptno int(2)\n);\ncreate table dept(\n\tdeptno int(2),\n    deptname varchar(20)\n);\n## 查询表数据及表信息\nshow tables;\ndesc employee; -- 查看表信息\nshow create table employee \\G; -- 显示表详细信息\n-- information_schema 存储系统中一些数据库对象信息，比如用户表信息、权限信息、列信息等等\n-- mysql 存储系统的用户权限信息\n## 修改表的属性、数据等等操作\nalter table employee modify ename varchar(20);\nalter table employee add column age int(3);\nalter table employee drop column age;\nalter table employee change column age age1 int(4);\nalter table employee add birth date after ename;\nalter table employee modify age1 int(3) first;\nalter table employee rename employee1;\n/**\n\tDML操作，主要是insert update delete select\n*/\ninsert into employee(ename,sal) values('dony',1000),('dony2',2000);\ninsert into employee(ename,sal,hiredate,deptno) values('zzz',100,'2019-1-1',1),('lisa',200,'2018-1-1',2),('qwe',100,'2017-1-1',1),('zzz',2000,'2016-1-1',4);\nupdate employee set ename='abc' where sal='1000';\ninsert into dept(deptno,deptname) value(1,'tech'),(2,'sale'),(5,'test');\ninsert into dept(deptno,deptname) value(6,'fin');\nupdate employee a,dept b set a.sal = a.sal*b.deptno,b.deptname=a.ename where a.deptno = b.deptno;\n\ndelete from employee where ename='abc';\nselect * from dept;\nupdate dept set deptname='hr' where deptno=2;\nselect * from employee;\nselect distinct deptno from employee order by deptno desc;\n\nselect * from employee order by deptno,sal desc limit 1,4;\nselect deptno,count(1) from employee group by deptno with rollup;\nselect deptno,count(1) from employee group by deptno having count(1)>1;\n-- 表连接 内连接：仅选出两张表中互相匹配的记录，也就是两个表的交集\nselect ename,deptname from employee,dept where employee.deptno=dept.deptno;\n-- 左（外）连接，将左表的记录全部显示出来，右表只会显示符合搜索条件的记录，右表记录不足的地方为null\nselect ename,deptname from employee left join dept on employee.deptno = dept.deptno; \nselect ename,deptname from dept left join employee on dept.deptno = employee.deptno; \n-- 右（外）连接，刚好与左连接相反\n\n-- 子查询\nselect * from employee where deptno in(select deptno from dept);\n\nselect deptno from employee union  select deptno from dept; -- union union all\n\n/**\n\tDCL:DBA管理系统中的对象权限时用到\n*/\ngrant select,insert on sonarqubedb.* to '' identified by 'root';\n-- 收回权限\nrevoke insert,select on sonarqubedb.* from 'root@localhost';\n-- 命令行模式下，查看支持哪些数据类型 ? data types 若想知道具体某个数据类型的信息 ? int\n-- 快速查看某项语法，使用关键字进行快速查询 ? show\n-- https://dev.mysql.com/doc/\n-- 存储引擎\ncreate table myisam_char(name char(10)) engine=MyISAM;\ninsert into myisam_char values(\"abc\"),(\"abc  \"),(\"  abc\"),(\"  abc  \");\nselect name,length(name) from myisam_char;\nshow variables like 'table_type';\nshow engines;\n\n\n")])])]),n("h2",{attrs:{id:"提示错误信息包含“select-list-is-not-in-group-by-clause-and-contains-nonaggre”"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#提示错误信息包含“select-list-is-not-in-group-by-clause-and-contains-nonaggre”","aria-hidden":"true"}},[e._v("#")]),e._v(" 提示错误信息包含“SELECT list is not in group by clause and contains nonaggre”")]),e._v(" "),n("p",[e._v("mysql5.7.5以上版本功能依赖检测功能，")]),e._v(" "),n("div",{staticClass:"language-mysql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("select @@global.sql_mode\n查询结果：\nONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\n去掉only_full_group_by设置\nset@@global.sql_mode=’STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION’;\n")])])])])}],!1,null,null,null);t.default=s.exports}}]);