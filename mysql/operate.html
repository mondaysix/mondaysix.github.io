<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mysql5.7服务无法启动问题 | Meiky blog</title>
    <meta name="description" content="Meiky blog">
    
    
    <link rel="preload" href="/assets/css/0.styles.b7a7bacd.css" as="style"><link rel="preload" href="/assets/js/app.ff4fe785.js" as="script"><link rel="preload" href="/assets/js/21.f9a9f4ee.js" as="script"><link rel="prefetch" href="/assets/js/10.d73b7caf.js"><link rel="prefetch" href="/assets/js/11.b18688c1.js"><link rel="prefetch" href="/assets/js/12.9f990093.js"><link rel="prefetch" href="/assets/js/13.5c80603b.js"><link rel="prefetch" href="/assets/js/14.7ef8105b.js"><link rel="prefetch" href="/assets/js/15.f37306b0.js"><link rel="prefetch" href="/assets/js/16.0add1531.js"><link rel="prefetch" href="/assets/js/17.f9a75775.js"><link rel="prefetch" href="/assets/js/18.abc2fa70.js"><link rel="prefetch" href="/assets/js/19.b696db58.js"><link rel="prefetch" href="/assets/js/2.2e319097.js"><link rel="prefetch" href="/assets/js/20.68617f6e.js"><link rel="prefetch" href="/assets/js/22.4231680e.js"><link rel="prefetch" href="/assets/js/23.4aa3d009.js"><link rel="prefetch" href="/assets/js/24.d073fcda.js"><link rel="prefetch" href="/assets/js/25.ae4d2525.js"><link rel="prefetch" href="/assets/js/26.20613490.js"><link rel="prefetch" href="/assets/js/27.b4e84db0.js"><link rel="prefetch" href="/assets/js/28.a52a25c3.js"><link rel="prefetch" href="/assets/js/29.d814cf90.js"><link rel="prefetch" href="/assets/js/3.48866b5a.js"><link rel="prefetch" href="/assets/js/30.a6586c96.js"><link rel="prefetch" href="/assets/js/31.03420aea.js"><link rel="prefetch" href="/assets/js/32.f5e24f69.js"><link rel="prefetch" href="/assets/js/33.3c7041e4.js"><link rel="prefetch" href="/assets/js/34.c7d18b95.js"><link rel="prefetch" href="/assets/js/4.a55045f1.js"><link rel="prefetch" href="/assets/js/5.5a4bda1f.js"><link rel="prefetch" href="/assets/js/6.a8cb3d3c.js"><link rel="prefetch" href="/assets/js/7.827fcc56.js"><link rel="prefetch" href="/assets/js/8.f2fa87ec.js"><link rel="prefetch" href="/assets/js/9.37dac320.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b7a7bacd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Meiky blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Catagory</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/swtest/" class="nav-link">SoftwareTest</a></li><li class="dropdown-item"><!----> <a href="/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/weblearn/" class="nav-link">WebLearn</a></li><li class="dropdown-item"><!----> <a href="/VersionControl/" class="nav-link">VersionControl</a></li><li class="dropdown-item"><!----> <a href="/android/" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link router-link-active">MySQL</a></li><li class="dropdown-item"><!----> <a href="/VMware/" class="nav-link">VMware</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Catagory</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/swtest/" class="nav-link">SoftwareTest</a></li><li class="dropdown-item"><!----> <a href="/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/weblearn/" class="nav-link">WebLearn</a></li><li class="dropdown-item"><!----> <a href="/VersionControl/" class="nav-link">VersionControl</a></li><li class="dropdown-item"><!----> <a href="/android/" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link router-link-active">MySQL</a></li><li class="dropdown-item"><!----> <a href="/VMware/" class="nav-link">VMware</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>mysql</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/mysql/operate.html" class="active sidebar-link">operate</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mysql/operate.html#mysql5-7服务无法启动问题" class="sidebar-link">mysql5.7服务无法启动问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mysql/operate.html#解决办法一" class="sidebar-link">解决办法一</a></li><li class="sidebar-sub-header"><a href="/mysql/operate.html#解决办法二" class="sidebar-link">解决办法二</a></li></ul></li><li class="sidebar-sub-header"><a href="/mysql/operate.html#access-denied-for-user-‘root’-‘localhost’-using-password-yes-问题" class="sidebar-link">Access denied for user ‘root’@‘localhost’ (using password: YES)问题</a></li><li class="sidebar-sub-header"><a href="/mysql/operate.html#创建用户并赋予权限" class="sidebar-link">创建用户并赋予权限</a></li><li class="sidebar-sub-header"><a href="/mysql/operate.html#撤销用户权限" class="sidebar-link">撤销用户权限</a></li><li class="sidebar-sub-header"><a href="/mysql/operate.html#备份数据库问题" class="sidebar-link">备份数据库问题</a></li><li class="sidebar-sub-header"><a href="/mysql/operate.html#创建触发器" class="sidebar-link">创建触发器</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h2 id="mysql5-7服务无法启动问题"><a href="#mysql5-7服务无法启动问题" aria-hidden="true" class="header-anchor">#</a> mysql5.7服务无法启动问题</h2> <p>以mysql 5.7.17 版本为例</p> <h3 id="解决办法一"><a href="#解决办法一" aria-hidden="true" class="header-anchor">#</a> 解决办法一</h3> <ol><li><p>进入mysql server安装的路径: cd C:\Program Files\MySQL\MySQL Server 5.7</p></li> <li><p>如果目录下有data文件的先删除掉data文件</p></li> <li><p>清除掉原来的服务:<strong>mysqld remove</strong></p></li> <li><p>重新安装服务: <strong>mysqld -install</strong></p></li> <li><p>产生无密码的帐号: <strong>mysqld --initialize-insecure</strong></p></li> <li><p>启动服务:<strong>net start mysql</strong></p></li> <li><p>登录数据库：<strong>mysql -u root -p</strong> 直接回车不输入密码</p></li> <li><p>此时若是需要修改密码的话，可继续操作</p></li> <li><p>修改root密码：</p> <p><strong>update user set authentication_string=password('123456') where user=&quot;root&quot;;</strong></p> <p><strong>flush privileges;</strong></p></li> <li><p>退出数据库<strong>exit</strong>后重新使用新的密码登录即可</p></li></ol> <h3 id="解决办法二"><a href="#解决办法二" aria-hidden="true" class="header-anchor">#</a> 解决办法二</h3> <p>启动services.msc里的mysql服务重新启动失败，提示“本地计算机上的MySQL服务启动后停止。某些服务在未由其他服务或程序使用时将自动”，可参考如下方式：</p> <p>1.首先需要把原来的服务删除，执行如下操作:</p> <ul><li>[ ] cd C:\Program Files\MySQL\MySQL Server 5.7</li> <li>[ ] <strong>mysqld --remove mysql</strong></li> <li>[ ] 进入bin目录</li> <li>[ ] <strong>mysqld--initialize-insecure --user=mysql</strong></li> <li>[ ] 注册服务<strong>mysqld --install mysql --defaults-file=C:\Program Files\MySQL\MySQL Server 5.7\my.ini</strong></li> <li>[ ] 启动服务:<strong>net start mysql</strong></li></ul> <h2 id="access-denied-for-user-‘root’-‘localhost’-using-password-yes-问题"><a href="#access-denied-for-user-‘root’-‘localhost’-using-password-yes-问题" aria-hidden="true" class="header-anchor">#</a> Access denied for user ‘root’@‘localhost’ (using password: YES)问题</h2> <p>输入正确用户名和密码登录失败，弹出access denied，可用跳过验证重新设置密码</p> <ol><li><p>使用管理员权限打开cmd,先看services.msc里的mysql服务是否已经关闭</p></li> <li><p>​	进入安装路径执行如下操作</p> <ul><li>[ ] cd C:\Program Files\MySQL\MySQL Server 5.7\bin</li> <li>[ ] ​	mysqld --initialize</li> <li>[ ] ​	mysqld --install mysql --defaults-file=C:\Program Files\MySQL\MySQL Server 5.7\my.ini</li> <li>[ ] ​	net stop mysql57</li> <li>[ ] ​	mysqld --skip-grant-tables</li></ul></li> <li><p>​	另外开一个cmd窗口，执行如下操作</p> <ul><li>[ ] mysql -u root</li> <li>[ ] update user set authentication_string=password('123456') where user=&quot;root&quot;;</li> <li>[ ] flush privileges;</li> <li>[ ] ​	关闭该窗口</li></ul></li> <li><p>​	再重新启动mysql服务</p> <ul><li><p>[ ] net start mysql</p></li> <li><p>[ ] mysql -u root -p 输入之前修改的密码可正常登录</p></li> <li><p>[ ] 若是正常登录后提示“ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.”则执行alter user user() identified by &quot;123456&quot;;</p></li></ul></li></ol> <h2 id="创建用户并赋予权限"><a href="#创建用户并赋予权限" aria-hidden="true" class="header-anchor">#</a> 创建用户并赋予权限</h2> <p>首先查看各个用户的权限情况</p> <p>​	<strong>select user,host,grant_priv from mysql.user;</strong></p> <p>若是当前用户登录下的grant_priv为N，则需要修改权限</p> <p>​	<strong>update user set grant_priv='Y' where user='username';</strong></p> <p><strong>FLUSH PRIVILEGES;</strong></p> <p>再创建一个新的用户并赋予权限</p> <p>​	<strong>create user 'username'@'%' identified by 'username';</strong>(通配符%表示让该用户从任意远程主机登录，如果是本地用户可以用localhost替换%)</p> <p>​	<em><em>grant select,insert,update,delete,create on databasename.</em> to username;</em>*</p> <p>​	<strong>FLUSH PRIVILEGES;</strong></p> <h2 id="撤销用户权限"><a href="#撤销用户权限" aria-hidden="true" class="header-anchor">#</a> 撤销用户权限</h2> <p><em><em>revoke select,insert,update,delete,create on databasename.</em> from 'username'@'%';</em>*</p> <h2 id="备份数据库问题"><a href="#备份数据库问题" aria-hidden="true" class="header-anchor">#</a> 备份数据库问题</h2> <p>备份数据库：<strong>mysqldump -u root -p --all-databases &gt; dumpdata.sql</strong></p> <p>恢复数据库 <strong>source dumpdata.sql</strong> 或者直接把sql脚本放在workbench里执行</p> <h2 id="创建触发器"><a href="#创建触发器" aria-hidden="true" class="header-anchor">#</a> 创建触发器</h2> <p>​	CREATE TRIGGER trigger_name trigger_time trigger_event ON tb_name FOR EACH ROW trigger_stmt
​		trigger_name：触发器的名称
​		tirgger_time：触发时机，为BEFORE或者AFTER
​		trigger_event：触发事件，为INSERT、DELETE或者UPDATE
​		tb_name：表示建立触发器的表明，就是在哪张表上建立触发器
​		trigger_stmt：触发器的程序体，可以是一条SQL语句或者是用BEGIN和END包含的多条语句
​	所以可以说MySQL创建以下六种触发器：BEFORE INSERT,BEFORE DELETE,BEFORE UPDATE,AFTER INSERT,AFTER DELETE,AFTER UPDATE</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">5/26/2019, 11:58:19 AM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.ff4fe785.js" defer></script><script src="/assets/js/21.f9a9f4ee.js" defer></script>
  </body>
</html>
